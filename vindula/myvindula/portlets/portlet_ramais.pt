<dl class="portlet" tal:define="view view/data">
    <dt class="portletHeader">
        <span class="tile" tal:content="view/get_title">Portlet Title</span>
    </dt>

    <dd class="portletItem odd">

		<div id="busca-portlet">
			<form action="#portlet-ramais" method="post" id="portlet-ramais">
		    	<h4>Nome:</h4>
				<input type="text" name="title" size="26" tal:attributes="value python: request.get('title', '')"/>
				<h4>Ramal:</h4>
				<input type="text" name="ramal" size="26" tal:attributes="value python: request.get('ramal', '')"/>
				<h4>Departamento:</h4>
				<tal:def define="filtro view/filtro_departamento|nothing;
								 ctx python:context;
								 uid_selected python: view.get_uid_struct_org(ctx)">
		            <tal:cond condition="python: filtro=='departamentos'">
		            	<select size="1" id="departamento" name="departamento" style="width:100%;">
			        		<option value="0" >Todos ...</option>
				            <tal:departamentos tal:repeat="item view/list_departamentos">
			            		<tal:cond condition="request/SearchSubmit|nothing">
					            	<option tal:define="id_request request/departamento | python:''" 
											tal:attributes="value item/UID|nothing;
											selected python: str(item.UID) == str(id_request)"
											tal:content="item/Title|nothing">Marketing 
					                </option> 
				                </tal:cond>
				                <tal:cond condition="not: request/SearchSubmit|nothing">
					                <option tal:define="id_request request/departamento | python:''" 
											tal:attributes="value item/UID|nothing;
											selected python: uid_selected == item.UID"
											tal:content="item/Title|nothing">Marketing 
					                </option>
					           </tal:cond>
					            
				                
				            </tal:departamentos>	
						</select>
		            </tal:cond>
		            <tal:cond condition="python: filtro!='departamentos'">
		            	<select size="1" id="departamento" name="departamento" style="width:100%;">
							<option value="0" >Todos ...</option>	
							<tal:rep repeat="item view/list_filtro">
								<option tal:define="id_request request/departamento | python:'';
									 				itemDep python:item.__getattribute__(filtro)"
										tal:condition="itemDep"
										tal:attributes="value itemDep|nothing;
										selected python: str(id_request)==str(itemDep)"
										tal:content="itemDep|nothing">Marketing 
				               </option>
							   
							</tal:rep>
						</select>
					</tal:cond>
				</tal:def>
				<div class="aling-right"> 
					<input type="submit" name="SearchSubmit" value="Buscar" class="context" i18n:attributes="value"/>
				</div>
     	 	</form>
			
			<!-- Results -->
			<tal:results tal:define="quant view/get_quantidade_portlet;
									 results view/busca_usuarios;">
				<tal:cond condition="results">									 	
		    		<h4><strong i18n:translate="">Resultados</strong></h4>
			    	<div>
				    	<tal:results tal:define="busca python:results[:int(quant)];"
					  			   	  tal:repeat="obj busca" >
							<div id="boxPortlet" tal:define="i repeat/obj/end;
							 								details python: view.get_details_user(obj) or None;" 
						     					 tal:attributes="class python:view.getEnd(i);">
								<div class="row">
									<tal:cond condition="view/show_picture">
										<div class="portlet-user-image">
											<a tal:attributes="href string:${here/portal_url}/myvindulalistuser?user=${obj/username}">
							                    <img src="defaultUser.png"
								             		 alt="" border="0"
						             		 		 width="50"
								             		 tal:attributes="src string:${here/portal_url}/user-image?username=${obj/username|nothing};
											 						 alt obj/name|nothing;
																	 title obj/name|nothing;" />
											</a>
						                </div>
									</tal:cond>
									<div class="portlet-user-info" tal:attributes="class python: not view.show_picture and 'portlet-user-info-larg' or 'portlet-user-info' "> 											     	      	
							        	<h4><a tal:attributes="href string:${here/portal_url}/myvindulalistuser?user=${obj/username}">
							        		   <span tal:content="python: view.get_principal_campo(obj)">func</span></a></h4>
							        	<!--p>	
							        		<span tal:replace="obj/position|nothing" /><br />
											<tal:def define="user obj/username;
															 departamentos python: view.get_department(user)">
								        		<tal:rep repeat="departamento departamentos">
								        			<span tal:content="departamento/Title">Departamento</span>
													<span tal:define="cont repeat/departamento/length;
																      last repeat/departamento/end"
											  			  tal:condition="python: cont > 1 and not last"> | </span>
								        		</tal:rep>
												<br />	
								        	</tal:def>
							        		<!--span tal:replace="obj/departamento/name|nothing" /><br /--
	
											<span tal:replace="obj/phone_number|nothing" /><br />
							        		<span tal:replace="obj/email|nothing" /><br />
							      	  	</p-->
										<p class="quebraLinha" >
											<tal:rep repeat="detail details" condition="details">
												<span tal:condition="python: detail['label'] and detail['content']" tal:content="string: ${detail/label}: "> </span>
												<span tal:condition="detail/content" tal:content="detail/content"> </span>
												<br tal:condition="python: detail['label'] or detail['content']">
											</tal:rep>
										</p>
									</div>
								</div>
						 	</div>
						 	<div class="visualClear"></div>
			      		</tal:results>
					</div>
			    	<div class="titulo_info_boxTipo2 aling-right">
				        <h4 tal:condition="python:results.count()>int(quant)">
				        	<a tal:attributes="href  string:${here/portal_url}/myvindulalistall?title=${request/title|nothing}&ramal=${request/ramal|nothing}&departamento=${request/departamento|nothing}&filtro=${view/filtro_departamento|python:'departamentos'}">Mais...</a>
				        </h4>
				    </div>

				</tal:cond>
			</tal:results>
			<tal:notresults tal:condition="python: not view.busca_usuarios() and 'SearchSubmit' in context.REQUEST.form">
				<h4 tal:content="view/check_filter">N&atilde;o h&aacute; resultados.</h4>				
			</tal:notresults>
			<tal:cond condition="view/get_details_text|nothing">
				<br>
				<div class="titulo_info_boxTipo2 aling-right">
					<p tal:replace="structure view/get_details_text|nothing" />
				</div>
				
			</tal:cond>
			
		</div>
    </dd>
    <dd class="portletFooter"></dd>
</dl>