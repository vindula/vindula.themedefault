<html>
	<body metal:use-macro="here/main_template/macros/master">
		
		<metal:block fill-slot="top_slot">
			<tal:dummy tal:define="dummy python:request.set('disable_border',1)" />
		</metal:block>
	
	  	<div metal:fill-slot="content-core">
			<h2 class="h2title">Usu&aacute;rios do portal</h2>
      		<meta:macro metal:define-macro="page-view">                  
				<tal:def define="member python:context.portal_membership.getAuthenticatedMember();
								  view_listall python: context.restrictedTraverse('@@myvindulalistall');
								  view_listuser python: context.restrictedTraverse('@@myvindulalistuser');
								  form_data view_listall/load_list | python:{};">
	                           					     
		        	<div id="interna" class="userlist" tal:define="Batch python:modules['Products.CMFPlone'].Batch;
											                       b_size python:20;
											                       b_start python:0;
											                       b_start request/b_start | b_start">
		        		<div id="busca">
		        			<form action="/myvindulalistall" method="post" id="portlet-ramais">
		        				<div style="float: left; padding-right: 5px;">
							    	<label>Nome:</label>
									<input type="text" name="title" size="26" tal:attributes="value python: request.get('title', '')"/>
								</div>
								<div style="float:left;"> 
									<input type="submit" name="SearchSubmit" value="Buscar" class="context" i18n:attributes="value"/>
								</div>
				     	 	</form>
		        		</div>
						<div class="visualClear"></div>
						<div tal:condition="form_data" class="all-users">
										 
							<div tal:define="batch python:Batch(form_data, b_size, int(b_start));" 
								 class="user" 
								 tal:repeat="item batch">
									 	
					            <a tal:attributes="href string:${here/portal_url}/myvindulalistuser?user=${item/username}">
					              <img tal:attributes="src string: ${context/portal_url|nothing}/user-image?username=${item/username|nothing}">
					              <br />
					              <span tal:content="python:view_listall.checaValor(item.name,item.username)"></span>
					            </a>

			          		</div>
						</div>
						
						<tal:cond tal:condition="form_data">
							<div class="navigation-users" tal:define="batch python:Batch(form_data, b_size, int(b_start));">
								<div metal:use-macro="here/batch_macros/macros/navigation" />
							</div>
						</tal:cond>
						
						<div tal:condition="not: form_data">
							<br>
							<h3 tal:content="view_listall/check_no_result">N&atilde;o h&aacute; resultados.</h3>
						</div>
		        	</div>
				</tal:def>
				
	  		</meta:macro>
	  	</div>    
  </body>
</html>